<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ABELENKPE SDA CHURCH</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
  /* Background slideshow */
  #slideshow {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    background-size: cover;
    background-position: center;
    opacity: 1;
    transition: opacity 1s ease-in-out;
  }

  #slideshow::after {
    content: "";
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6); /* dark overlay */
    z-index: 1;
    pointer-events: none;
  }

  body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    margin: 0;
    color: #fff;
    position: relative;
  }

  header {
    background-color: rgba(247, 23, 23, 0.85);
    color: white;
    padding: 1rem;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    transition: all 0.3s ease;
  }

  header img {
    height: 50px;
    margin-right: 0.5rem;
    transition: all 0.3s ease;
  }

  header h3 {
    margin: 0;
    font-size: 1.5rem;
    text-align: center;
  }

  main {
    flex: 1 0 auto;
    padding-top: 140px;
    max-width: 900px;
    margin: auto;
    backdrop-filter: blur(6px);
  }

  h2 {
    font-size: 2.5rem;
    font-weight: bold;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.8);
  }

  footer {
    flex-shrink: 0;
    background-color: rgba(52, 58, 64, 0.9);
    color: white;
    padding: 1rem;
    text-align: center;
  }

  .card {
    margin-bottom: 1.5rem;
    background-color: rgba(0, 0, 0, 0.6);
    color: #fff;
  }

  .btn i {
    margin-right: 0.3rem;
  }

  @media(max-width: 576px) {
    main { padding: 120px 1rem 1rem; }
    .d-flex { flex-direction: column; }
    .d-flex input, .d-flex button { width: 100%; margin-bottom: 0.5rem; }
    h2 { font-size: 1.8rem; }
  }
</style>
</head>
<body>

<!-- Background slideshow -->
<div id="slideshow"></div>

<header>
  <img src="images/sda logo.png" alt="Church Logo">
  <h3>ABELENKPE SDA CHURCH</h3>
</header>

<main class="container text-center">

  <!-- Search & Mark Attendance -->
  <div class="card mb-3 shadow-sm">
    <div class="card-body">
      <p>Enter your registered phone number or name to mark attendance.</p>
      <div class="d-flex mb-2">
        <input type="text" id="memberSearchInput" class="form-control me-2" placeholder="Enter name or phone">
        <button id="memberSearchBtn" class="btn btn-info"><i class="fas fa-search"></i> Search</button>
      </div>
      <div id="memberInfoBox" class="mt-2"></div>
    </div>
  </div>

  <!-- Quick Access -->
  <div class="card text-center shadow-sm">
    <div class="card-body">
      <h5>Quick Access</h5>
      <a href="registration.html" class="btn btn-success m-1"><i class="fas fa-user-plus"></i> Register</a>
      <a href="login.html" class="btn btn-success m-1"><i class="fas fa-sign-in-alt"></i> Login</a>
    </div>
  </div>

 <!-- Meeting Days -->
<div class="card text-center shadow-sm">
  <div class="card-body">
    <h5>Our Weekly Meeting Days</h5>
    <ul class="list-group list-group-flush text-start mt-3">
      <li class="list-group-item bg-transparent text-white"><i class="fas fa-book"></i> Sunday: Bible Studies</li>
      <li class="list-group-item bg-transparent text-white"><i class="fas fa-users"></i> Wednesday: Prayer Meeting</li>
      <li class="list-group-item bg-transparent text-white"><i class="fas fa-sun"></i> Friday: Vespers Service</li>
      <li class="list-group-item bg-transparent text-white"><i class="fas fa-heart"></i> Saturday: Sabbath Worship</li>
    </ul>
  </div>
</div>

</main>

<footer>
  &copy; <span id="year"></span> ABELENKPE SDA CHURCH. All Rights Reserved. | Contact: abelenkpesdachurch@gmail.com
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Members and attendance
  let members = JSON.parse(localStorage.getItem("members")) || [
    { fullName:'John Doe', role:'Class 1', phone:'0541111111', gender:'Male' },
    { fullName:'Mary Ann', role:'Class 5', phone:'0542222222', gender:'Female' },
    { fullName:'Peter Smith', role:'Other', phone:'0543333333', gender:'Male' }
  ];

  let currentSession = JSON.parse(localStorage.getItem("currentSession")) || { 
    active: true, 
    date: new Date().toISOString().slice(0,10), 
    time: new Date().toTimeString().slice(0,5), 
    presentPhones: [] 
  };

  const memberSearchInput = document.getElementById('memberSearchInput');
  const memberSearchBtn = document.getElementById('memberSearchBtn');
  const memberInfoBox = document.getElementById('memberInfoBox');

  function saveSession(){ localStorage.setItem("currentSession", JSON.stringify(currentSession)); }

  memberSearchBtn.addEventListener('click', () => {
    const query = memberSearchInput.value.trim().toLowerCase();
    if(!query) return;

    const member = members.find(m => 
      m.fullName.toLowerCase().includes(query) || m.phone.includes(query)
    );

    if(!member){
      memberInfoBox.innerHTML = `<span class="text-danger">⚠️ Member not found.</span>`;
    } else {
      const isPresent = currentSession.presentPhones.includes(member.phone);
      memberInfoBox.innerHTML = `
        <div class="card text-start p-2">
          <p><strong>Name:</strong> ${member.fullName}</p>
          <p><strong>Phone:</strong> ${member.phone}</p>
          <p><strong>Role:</strong> ${member.role}</p>
          <p><strong>Gender:</strong> ${member.gender}</p>
          <p><strong>Status:</strong> <span class="${isPresent ? 'text-success' : 'text-secondary'}">${isPresent ? 'Present' : 'Absent'}</span></p>
          <button class="btn btn-success w-100 mt-2 mark-attendance-btn">${isPresent ? 'Already Present' : 'Mark Attendance'}</button>
        </div>
      `;

      const markBtn = memberInfoBox.querySelector('.mark-attendance-btn');
      if(markBtn){
        markBtn.addEventListener('click', () => {
          if(!currentSession.active){
            alert('Attendance session is not active.');
            return;
          }
          if(!currentSession.presentPhones.includes(member.phone)){
            currentSession.presentPhones.push(member.phone);
            saveSession();
            memberInfoBox.querySelector('p:nth-child(5) span').className = 'text-success';
            memberInfoBox.querySelector('p:nth-child(5) span').textContent = 'Present';
            markBtn.textContent = 'Already Present';
          }
        });
      }
    }

    setTimeout(() => { memberInfoBox.innerHTML = ''; }, 30000);
  });

  document.getElementById("year").textContent = new Date().getFullYear();

  // Background slideshow with new darker/warm church images
  const bgImages = [
    'https://images.unsplash.com/photo-1553729459-efe14ef6055d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1507668077129-56e05f3ef43d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1572072393749-7b182c4a2a84?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1502764613149-7f1d229e2302?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1494894194458-0174142560c1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1508796079212-d1c1e2c2c46e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600',
    'https://images.unsplash.com/photo-1501466044931-62695aada8e2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1600'
  ];

  let bgIndex = 0;
  const slideshow = document.getElementById('slideshow');
  slideshow.style.backgroundImage = `url('${bgImages[0]}')`;

  function changeBackground() {
    slideshow.style.opacity = 0;
    setTimeout(() => {
      bgIndex = (bgIndex + 1) % bgImages.length;
      slideshow.style.backgroundImage = `url('${bgImages[bgIndex]}')`;
      slideshow.style.opacity = 1;
    }, 1000);
  }

  setInterval(changeBackground, 5000);


  // Function to get time-based greeting
function getGreeting() {
  const hour = new Date().getHours();
  if (hour < 12) return "Good Morning";
  if (hour < 18) return "Good Afternoon";
  return "Good Evening";
}

// Show greeting after 1 second, slide in, then disappear after 8 seconds
setTimeout(() => {
  const greetingContainer = document.createElement('h3'); // smaller than h2
  greetingContainer.textContent = `${getGreeting()}! Welcome to Abelenkpe SDA Church-Fellowship and Service to God`;
  
  // Styling
  greetingContainer.style.textShadow = "1px 1px 3px rgba(0,0,0,0.6)";
  greetingContainer.style.marginBottom = "20px";
  greetingContainer.style.fontSize = "20px";
  greetingContainer.style.fontWeight = "600";
  greetingContainer.style.position = "relative";
  greetingContainer.style.left = "-100%";  // start outside
  greetingContainer.style.transition = "left 1s ease-in-out, opacity 1s ease-in-out";
  greetingContainer.style.opacity = 0;

  document.querySelector("main").prepend(greetingContainer);

  // Slide in + fade in
  setTimeout(() => {
    greetingContainer.style.left = "0";
    greetingContainer.style.opacity = 1;
  }, 100);

  // After 8 seconds, slide out + fade out
  setTimeout(() => {
    greetingContainer.style.left = "100%";
    greetingContainer.style.opacity = 0;
    setTimeout(() => {
      greetingContainer.remove();
    }, 1000); // remove after slide out
  }, 8000);

}, 1000);

</script>
</body>
</html>



